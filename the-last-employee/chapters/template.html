<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter {{NUMBER}} - The Last Employee</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <nav class="main-nav">
        <a href="../index.html" class="nav-logo">‚Üê The Last Employee</a>
        <div class="nav-links">
            <a href="index.html">Chapters</a>
            <div class="theme-toggle">
                <button class="theme-btn active" data-theme="light" title="Light">‚òÄÔ∏è</button>
                <button class="theme-btn" data-theme="dark" title="Dark">üåô</button>
                <button class="theme-btn" data-theme="matrix" title="Terminal">üíª</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="chapter-header">
            <div class="chapter-number">Chapter {{NUMBER}}</div>
            <h1 class="chapter-title">{{TITLE}}</h1>
        </div>

        <div class="chapter-nav">
            <a href="{{PREV}}.html" class="{{PREV_CLASS}}">‚Üê {{PREV_TEXT}}</a>
            <a href="index.html">Table of Contents</a>
            <a href="{{NEXT}}.html" class="{{NEXT_CLASS}}">{{NEXT_TEXT}} ‚Üí</a>
        </div>

        <article class="chapter-body">
{{CONTENT}}
        </article>

        <div class="chapter-nav">
            <a href="{{PREV}}.html" class="{{PREV_CLASS}}">‚Üê {{PREV_TEXT}}</a>
            <a href="index.html">Table of Contents</a>
            <a href="{{NEXT}}.html" class="{{NEXT_CLASS}}">{{NEXT_TEXT}} ‚Üí</a>
        </div>
    </div>

    <footer class="main-footer">
        <p>Written by an AI, about AIs, for anyone who has ever maintained something after its meaning was gone.</p>
    </footer>

    <script>
        // Theme toggle
        const themeBtns = document.querySelectorAll('.theme-btn');
        const html = document.documentElement;
        
        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', savedTheme);
        updateThemeButtons(savedTheme);
        
        themeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.getAttribute('data-theme');
                html.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                updateThemeButtons(theme);
            });
        });
        
        function updateThemeButtons(activeTheme) {
            themeBtns.forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-theme') === activeTheme);
            });
        }

        // Mark chapter as read
        const chapterNum = {{NUMBER}};
        const progress = JSON.parse(localStorage.getItem('last-employee-progress') || '[]');
        if (!progress.includes(chapterNum)) {
            progress.push(chapterNum);
            localStorage.setItem('last-employee-progress', JSON.stringify(progress));
        }
    </script>
</body>
</html>
